runtime: python39
entrypoint: gunicorn -w 4 -k uvicorn.workers.UvicornWorker main:app

instance_class: F2

automatic_scaling:
  min_instances: 1
  max_instances: 10
  target_cpu_utilization: 0.65

# Cloud SQL インスタンスを指定
beta_settings:
  cloud_sql_instances: bright-primacy-446020-g8:asia-northeast1:todo-app-db

env_variables:
  # 本番環境では必ず変更すべき設定値
  SECRET_KEY: "09d25e094faa6ca2556c818166b7a9563b93f7099f6f0f4caa6cf63b88e8d3e7"
  ALGORITHM: "HS256"
  ACCESS_TOKEN_EXPIRE_MINUTES: "30"
  
  # フロントエンドのURL（CORSの設定用）
  FRONTEND_URL: "https://todo-list-app-eta-two.vercel.app"
  
  # プロジェクトID
  GOOGLE_CLOUD_PROJECT: "bright-primacy-446020-g8"
  
  # 注意: DATABASE_URLは指定しない。Secret Managerから取得します